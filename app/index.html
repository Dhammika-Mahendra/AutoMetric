<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoMetric - Car Price Prediction</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="index.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-car"></i>
                </div>
                <span class="logo-text">AutoMetric</span>
            </div>
            <p class="description">
                Get accurate <span class="highlight">car price predictions</span> for the Sri Lankan market. 
                Simply enter your vehicle details and let our advanced AI model estimate the fair market value 
                based on current trends and historical data.
            </p>
        </header>

        <!-- Form -->
        <div class="form-container">
            <form id="priceForm">
                <div class="form-grid">
                    <!-- Brand -->
                    <div class="form-group">
                        <label><i class="fas fa-copyright"></i>Brand</label>
                        <div class="search-select">
                            <input type="text" class="form-control" id="brand" placeholder="Search brand..." readonly onclick="openModal('brand', 'Select Brand')">
                        </div>
                    </div>

                    <!-- Model -->
                    <div class="form-group">
                        <label><i class="fas fa-car-side"></i>Model</label>
                        <div class="search-select">
                            <input type="text" class="form-control" id="model" placeholder="Search model..." readonly onclick="openModal('model', 'Select Model')">
                        </div>
                    </div>

                    <!-- Year of Manufacture -->
                    <div class="form-group">
                        <label><i class="fas fa-calendar-alt"></i>Year of Manufacture</label>
                        <input type="number" class="form-control" id="yom" placeholder="e.g., 2020" min="1950" max="2026">
                    </div>

                    <!-- Engine CC -->
                    <div class="form-group">
                        <label><i class="fas fa-cogs"></i>Engine CC</label>
                        <input type="number" class="form-control" id="engineCC" placeholder="e.g., 1500" min="500" max="8000">
                    </div>

                    <!-- Gear -->
                    <div class="form-group">
                        <label><i class="fas fa-dharmachakra"></i>Gear</label>
                        <select class="form-control" id="gear">
                            <option value="" disabled selected>Select gear type</option>
                            <option value="Automatic">Automatic</option>
                            <option value="Manual">Manual</option>
                        </select>
                    </div>

                    <!-- Fuel Type -->
                    <div class="form-group">
                        <label><i class="fas fa-gas-pump"></i>Fuel Type</label>
                        <select class="form-control" id="fuelType">
                            <option value="" disabled selected>Select fuel type</option>
                            <option value="Petrol">Petrol</option>
                            <option value="Diesel">Diesel</option>
                            <option value="Hybrid">Hybrid</option>
                            <option value="Electric">Electric</option>
                        </select>
                    </div>

                    <!-- Mileage -->
                    <div class="form-group">
                        <label><i class="fas fa-tachometer-alt"></i>Mileage (KM)</label>
                        <input type="number" class="form-control" id="mileage" placeholder="e.g., 50000" min="0">
                    </div>
                </div>

                <!-- Price Button and Display -->
                <div class="btn-container">
                    <button type="submit" class="btn-price" id="priceBtn">
                        <i class="fas fa-tags"></i>
                        <span class="btn-text">Get Price</span>
                        <div class="loading">
                            <div class="spinner"></div>
                        </div>
                    </button>
                    
                    <!-- Price Display -->
                    <div class="price-display" id="priceDisplay">
                        <div class="price-label">Estimated Price</div>
                        <div class="price-value" id="priceValue">Rs. 0</div>
                        <div class="price-tolerance">
                            <i class="fas fa-info-circle"></i>
                            Tolerance: <strong>Â± 1,000,000 LKR</strong>
                        </div>
                        <button class="btn-explain" id="btnExplain" onclick="openExplainModal()" title="View price breakdown" style="display:none">
                            <i class="fas fa-chart-bar"></i>
                            <span>Explain</span>
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Popup -->
    <div class="modal-overlay" id="modalOverlay" onclick="closeModal(event)">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <button class="modal-close" onclick="closeModal(event)">
                    <i class="fas fa-times"></i>
                </button>
                <div class="modal-title" id="modalTitle">Select Option</div>
                <input type="text" class="modal-search" id="modalSearch" placeholder="Search..." oninput="filterModalItems()">
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Items will be populated dynamically -->
            </div>
        </div>
    </div>

    <!-- Explainability Modal -->
    <div class="modal-overlay" id="explainModalOverlay" onclick="closeExplainModal(event)">
        <div class="explain-modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <button class="modal-close" onclick="closeExplainModal(event)">
                    <i class="fas fa-times"></i>
                </button>
                <div class="modal-title"><i class="fas fa-chart-bar" style="margin-right:7px"></i>Price Breakdown</div>
            </div>
            <div class="explain-modal-body">
                <!-- Chart Section -->
                <div class="explain-section">
                    <div class="explain-section-title">
                        <i class="fas fa-sliders-h"></i> Factor Impact
                    </div>
                    <div class="chart-legend">
                        <span class="legend-decrease"><span></span>Decreases price</span>
                        <span class="legend-increase"><span></span>Increases price</span>
                    </div>
                    <div class="explain-chart" id="explainChart"></div>
                </div>
                <!-- Reasons Section -->
                <div class="explain-section">
                    <div class="explain-section-title">
                        <i class="fas fa-list-ul"></i> Key Reasons
                    </div>
                    <ul class="reasons-list" id="reasonsList"></ul>
                </div>
            </div>
        </div>
    </div>

    <script src="index.js"></script>
</body>
</html>
